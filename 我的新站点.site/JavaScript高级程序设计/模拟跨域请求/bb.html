<!--
 * @Description: 
 * @Author: lxp
 * @Date: 2020-10-26 17:47:17
 * @LastEditTime: 2021-06-11 11:07:23
 * @LastEditors: lxp
-->
<!DOCTYPE html  >
<html >
<head>
<meta  charset="utf-8" />
<title>无标题文档</title>
<style>
   h3{ 
   	font-size: 30px;
	color: pink;
	}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head>
<body>
 
<h3 class="h1">hello bb.html</h3>
<script>
    // 接收domain1的数据
    window.addEventListener('message', function(e) {
        console.log('data from localhost ---> ' + e.data);
		console.log(e)
         
		//判断来源，安全策略
		if(e.origin!=='http://localhost:8080'){
			return;
		}
        var data = JSON.parse(e.data);
        if (data) {
            data.number = 19;
			data.love='apple'

            // 处理后再发回domain1
            window.parent.postMessage(JSON.stringify(data), e.origin);
        }
    }, false);
</script>
</body>
</html>
