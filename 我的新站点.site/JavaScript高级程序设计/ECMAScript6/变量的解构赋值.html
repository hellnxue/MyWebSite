<!DOCTYPE html>
<html>
<head>
<meta charset="gb2312" />
<title>writer title here</title>
<link href="../../CSS课程/CSS/CSSUtil.css" rel="stylesheet" type="text/css"/>
<style>
  body{
	  background-color:#eee;}
  input{
   	  display: block;     
	  width:200px;
	  margin: 20px auto 40px;
	  border-radius:10px;
	  background:-moz-linear-gradient(#CCFFCC, #fff 50%,#CCFFCC);
	  background:-ms-linear-gradient(#CCFFCC, #fff 50%,#CCFFCC);
	  background:-webkit-linear-gradient(#CCFFCC, #fff 50%,#CCFFCC);
	  border:none;/*去掉按钮默认的阴影，超级难看的默认样式*/
	  box-shadow:0 12px 8px -9px #555;
  }
  #wrap{
	  overflow:hidden;
	  width:1000px;
	  margin:20px auto;
	   box-sizing:border-box;
	  }
  
  fieldset{
	  float:left;
	  width:400px;
	  min-height:300px;
	  margin:20px 0px;
	/*  padding:0;*/
	  border: none;
	  border-right: 3px solid #eee;
	  background-color:#fff; 
	  border-radius: 10px 0;
	  box-shadow: 0 12px 8px -9px #ccc;
	  box-sizing:border-box;
	  text-align:center;
  }
  
  fieldset:nth-child(1){
  	width:200px;}
  
  fieldset:nth-child(2){
  	width:660px;
	text-align:left;
  
  }

  fieldset.out div{
    display:inline-block;
  	margin-top:20px;
	color:#999;}
	
  div#btn {
  	 
	box-sizing:border-box;
	float: left;
	width: 100px;
    margin-top: 20px;
    min-height: 300px;
    position: relative;
    text-align: left;
	
	}
  
 div#btn input{
    display: inline-block;
    margin: -20px 0 0;
    position: absolute;
    top: 50%;
    width: 100px;
	height:25px;
	 
	}
  
</style>
<script type="text/javascript" src="../../js/jquery-1.8.2.min.js"></script>

<script>

/*公共方法-消息显示*/
function commonShow(msg){
 
  $("#out").append("<br/>"+String(msg));//不能用msg.toString() 因为boolean类型用在此处会报错
}

function clears(){
   $("#out").html("");
}

 
 //-------------------------------------------------------------------
 
  var a=10;
  console.log(window.a);//10  
  
  let b=20;
  console.log(window.b); //undefined let声明的全局变量不会成为window对象的属性
     
   
  

function test1(){

 //数组解构改变量赋值
 var [a,b,c]=[1,2,3];
 commonShow("------  var [a,b,c]=[1,2,3]----------");
 commonShow(a+"\n"+b+"\n"+c);//1 2 3 
 
 
 commonShow("------ let [c1,[c2],c3]=[\"a\",[[3]],\"hihi\"]----------");
 let [c1,[c2],c3]=["a",[[3]],"hihi"];
  commonShow(c1+"\n"+c2+"\n"+c3);
 
 
 
   
  //对象解构给变量赋值
  var { foo, bar } = { foo: "aaa", bar: "bbb" };
   commonShow("------   var { foo, bar } = { foo: \"aaa\", bar: \"bbb\" }----------");
  commonShow(foo);//aaa
  
  let [ , , third] = ["foo", "bar", "baz"];
  console.log(third);//baz
  
  /*比较古怪的赋值方式，...tail代表变量tail是一个数组*/
	let [head, ...tail] = [1, 2, 3, 4,5];
	
	console.log(head);//1
	console.log(tail+"\n"+Array.isArray(tail));//2,3,4 true tail是数组，与字符串相连，自动调用每一项的toString()方法转为字符串拼接结果
	
	
	let [x, y, ...z] = ['a'];
    
	commonShow("------ let  [x, y, ...z] = ['a']----------");
    commonShow("x:"+x+ " y:"+y);//a  undefined
	console.log(z);//[] 空数组 
	
   
  
}
 
function test11(){
	
 	 var [foo = true] = [];
 	 commonShow( "var [foo = true] = []");
    commonShow( foo);//true
	
	
	/*ES6内部使用严格相等运算符（===），判断一个位置是否有值。所以，如果一个数组成员不严格等于undefined，默认值是不会生效的。*/
	var [x = 1] = [undefined];
    commonShow( "var [x = 1] = [undefined]");
    commonShow( x);//1
	
	var [y = 1] = [null];
    commonShow( "var [y = 1] = [null]");
    commonShow( y);//null  y的默认值未生效，因为null===undefined 为false, 但null==undefined为true哎
	
	function f() {
    return "function";
    }
	/*如果默认值是一个表达式，那么这个表达式是惰性求值的，即只有在用到的时候，才会求值。*/
	 commonShow( "let [xx = f()] = [1]");
	 let [xx = f()] = [1];
	 commonShow("xx: "+ xx);//1
	 commonShow( "let [yy = f()] = []");	
	 let [yy = f()] = [];
	 commonShow( "yy: "+yy);//1
   
}

/*
 //??????????调用时没有报错哎
function bar(x = y, y = 2) {
  return [x, y];
}*/

/*IE10.0不支持参数有默认值哎*/
function test2(x=2){
  
  commonShow(x);
 }  
 
function test3(arg){

   //error
   /* let arg=1;*/

   {
     let arg=1;
	 commonShow(arg);
   }
}


/*没见过的问题-很新奇，很专业*/
var date=new Date();
function test4(){

 commonShow(date);//undefined 原因在于函数内部，又声明了一次变量，变量提升，值是undefined
 
  if(false){
    var date="hello world";
  }
}

</script>
</head>

<body>
	<div id="wrap">
		<fieldset class="enter">
		 <legend>try.....</legend>
			 <input type="button"  value="解构赋值测试" onClick="test1()"/> 
			
			<input type="button"  value="解构赋值允许默认值" onClick="test11()"/> 
			
			<input type="button"  value="函数参数默认值" onClick="test2()"/> 
			
			<input type="button"  value="重复声明" onClick="test3(11)"/> 
			 
		    <input type="button"  value="ES5变量提升导致的问题" onClick="test4()"/>
			
			  
		</fieldset>
		
		<fieldset class="out">
		 <legend>out.....</legend>
		 <div id="out">
		   result here......
		 </div>	 
		 
			
			  
		</fieldset>
		
		 
		 
		 <div id="btn">
		   <input type="button"  value="clear" onClick="clears()"/> 
		 </div>	 
		 
			
			  
		 
	</div>
	

</body>
</html>
