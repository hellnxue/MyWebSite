<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<script type="text/javascript">
// function testLoad(){
// 		alert('I am ok.')
// 	}

 


</script>
<script type="text/javascript" src="../../js/jquery-1.8.2.min.js" id='helloworld'  ></script>
<script type="text/javascript">

 var dom = document.getElementById('helloworld');
	 console.log(dom)
	 dom.addEventListener('load',function(){
	 	 alert('I am ok.')
	 })  



//创建对象--工厂模式
function Person(name,age){
   var o=new Object();
   o.name=name;
   o.age=age;
   o.say=function(){
     console.log("hello "+this.name);
   }
   return o;
}


//创建对象--构造函数模式
function Persons(name,age){
    
   this.name=name;
   this.age=age;
   this.say=function(){
     console.log("hello "+this.name);
   }
    
}

　function Cat(name,color){

　　　　return {

　　　　　　name:name,

　　　　　　color:color

　　　　}

　　} 

$(function(){
	$("#d1").on("click",function(){
	 
	  var person1=Person("helln",10);
	  console.log(typeof person1);//object
   	  console.log(typeof Person);//function
	
	  console.log(person1.name);
	  person1.say();
	  var person2=Person("tom",20);
	  console.log(person2.name);
	  person2.say();
	  
	});

 
	$("#d3").on("click",function(){
	 
	  　var cat1 = Cat("大毛","黄色");

　	  　var cat2 = Cat("二毛","黑色");

		console.log(cat1 instanceof Cat);
		
	 
	  
	});

});
function testtype(){
 var person1=Person("小新",10);//工厂模式创建的对象不能成为一种特定类型的对象，构造函数实例化创建的对象可以
 
 var persons=new Persons("实例小新",10);
 
 console.log("工厂模式创建的对象="+person1 instanceof Person);

 console.log("构造函数创建的对象="+persons instanceof Persons);
 
 console.log(Persons.prototype);
}
</script>
</head>

<body>
<input type="button"  name="d1" id="d1" value="工厂模式"/></br>
<input type="button"  name="d2" id="d2" value="构造函数模式"/></br>
<input type="button"  name="d2" id="d4" value="测试创建的对象的类型" onClick="testtype()"/></br>

<input type="button"  name="d2" id="d3" value="1111111111111111"/></br>









<input type="button"   value="Object.assign()" onclick="objAssign()" /></br>
<input type="button"   value="原型对象" onclick="proObj()" /></br>
<input type="button"   value="重写原型对象-构造函数实例之前" onclick="rewriteBefore()" /></br>
<input type="button"   value="重写原型对象-构造函数实例之后" onclick="rewriteAfter()" /></br>

<input type="button"   value="es6-类" onclick="classTest()" /></br>
<script type="text/javascript"  >
	
	function loadJs(path,callback){
	    var header=document.getElementsByTagName("head")[0];
	    var script=document.createElement('script');
	    script.setAttribute('src',path);
	    header.appendChild(script);
	    //对于浏览器的判断是ie还是其他
	    if(!/*@cc_on!@*/false){
	        script.onload=function(){
	            console.log("非ie");
	            callback();
	        }
	    }else{
	        script.onreadystatechange=function(){
	            if(script.readystate=="loaded" ||script.readState=='complate'){
	                console.log("ie");
	                callback();
	            }
	        }
	    }
	}

console.log("first test");
loadJs("http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js",function(){
    console.log("已经加载完成")
});
console.log("second test");
</script>
<script type="text/javascript" >



    function Person(){

    }

    var protObj=Person.prototype;
    protObj.name='Tom';
    protObj.sayName=function(){
    	console.log(this.name)
    }

	function proObj(){
		let p1=new Person();
		let p2=new Person();
		p1.sayName();
		p2.sayName();
	 /* p2.name='Nicholas'
		p1.sayName();//Tom    
		p2.sayName();//Nicholas */

		Person.prototype.name='Nicholas';
		p1.sayName();
		p2.sayName();

		var rlt=p1.sayName==p2.sayName;

		console.log(rlt)


		console.log(p1)

		var obj={
			name:'helln'
		}

		console.log(typeof Person)//function 
		console.log(typeof p1) //object

		let relation=Person.prototype.isPrototypeOf(p1)
		console.log(relation);//true

		let prot=Object.getPrototypeOf(p1)==Person.prototype;
		console.log(prot);//true

		let cott=p1.constructor==p2.constructor;
		console.log(cott);//true


		p1.name='Darcy';
		console.log(p1.name,Person.prototype.name)//Darcy Nicholas

		let hopt=Person.prototype.hasOwnProperty("name");
		let hoptp1=p1.hasOwnProperty("name");
		console.log(hopt,hoptp1);//true true


		let keys=Object.keys({a:1,b:2,c:3});
		let [aa,cc,bb]=keys;
		console.log(keys);
		console.log(aa,cc ,bb)


		Person.prototype.love='blue';
		console.log(p1.love,p2.love)
       
	}






	function Person1(){

    }


	function rewriteBefore(){
		Person1.prototype={
		 constructor:Person1,
    	 name:'Tom',
         sayName:function(){
	    	console.log(this.name)
	     }
        }

		let p1=new Person1();
		
     	console.log(p1.name) ;//'Tom'  
	}

	function Person2(){

    }


	function rewriteAfter(){
		

		let p1=new Person1();
		Person2.prototype={
		 constructor:Person1,
    	 name:'Tom',
         sayName:function(){
	    	console.log(this.name)
	     }
        }
		
     	console.log(p1.name)  //undefined   
	}













	function objAssign(){
		let obj1={
			name:'tom',
			love:'apple',
			move:[1]
		},
		obj2={
			name:'jack',
			move:[1,2],
			age:100
		};

		Object.assign(obj1,obj2);
		console.log(obj1)
	}

	class Foo {
	  constructor(name,love) {
	    this.names=name;
	    this.loves=love;
	  }
	}


	function say(){
		var name='helln';
		return name='hello'
	}

	function classTest(){
		var foo1=new Foo('darcy1','ludi');
		var foo2=new Foo('darcy2','ludi');
		console.log(foo1.__proto__==foo2.__proto__)

		console.log(say())
		 
	}
</script>
</body>
</html>
