<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<script type="text/javascript" src="../../js/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
$(function(){
$("#d1").on("click",function(){
  var date=new Date();
   console.log("date=="+date);
   console.log("date.getTime()=="+date.getTime());//日期的毫秒值，时间戳
   console.log("date.getFullYear()=年="+date.getFullYear());
   console.log("date.getMonth()=月="+Number(date.getMonth()+1));
   console.log("date.getDate()=日="+date.getDate());
   console.log("date.getDay()=星期="+date.getDay());
   console.log("");
});

$("#d2").on("click",function(){
  console.log( getHandleDate(new Date().getTime()));
});


$("#d3").on("click",function(){
 
  var date=new Date();
   console.log( "default111 ="+date.getMonth());
   
   date.setMonth(date.getMonth()+1);
   console.log( "default222 ="+date.getMonth());
   
   console.log(getHandleDate(Date.parse("2015-09-17T09:29:20.6877003+08:00")));
   
   
	
	var datee="2015-12-04 15:49:03";
	console.log(datee.split(" ")[0]+"\n"+datee.split(" ").length);
	console.log(getHandleDateYMD(datee));
  
   console.log(getHandleDate(438710400000));
});

});
//时间格式化------根据时间的毫秒值处理时间获得年月日
function getHandleDate(ms){
   var date=new Date(ms);
   var month= date.getMonth()+1 +"";
   if(month.length<2){
 	 month="0"+month;
  }
   var day= date.getDate() +"";
   if(day.length<2){
 	 day="0"+day;
  }
   
  var handleDate=date.getFullYear()+"-"+month+"-"+day;
  return handleDate;
}
//时间格式化-----将格式为2015-12-04 15:49:03的只要年月日
function getHandleDateYMD(ymdhhmmss){
	 
	  return ymdhhmmss.split(" ")[0];
	
};

/*格式化new Date().toString()获得的时间*/
function formdate(date,format){
 
  var date = new Date(date);

    var map = {
        "M": date.getMonth() + 1, //月份 
        "d": date.getDate(), //日 
        "h": date.getHours(), //小时 
        "m": date.getMinutes(), //分 
        "s": date.getSeconds(), //秒 
        "q": Math.floor((date.getMonth() + 3) / 3), //季度 
        "S": date.getMilliseconds() //毫秒 
    };
    format = format.replace(/([yMdhmsqS])+/g, function(all, t){
	    
        var v = map[t];
        if(v !== undefined){
            if(all.length > 1){
                v = '0' + v;
                v = v.substr(v.length-2);
            }
            return v;
        }
        else if(t === 'y'){
            return (date.getFullYear() + '').substr(4 - all.length);
        }
        return all;
    });
	
	return format;
	}
	
function formatDate(){
   
   //格式化时间  年月日，时分秒
   var result=formdate(new Date().toString(),"yyyy年 MM月 dd日 hh:mm:ss");
   console.log(result);
   
   
   //时间戳转成时间
   var result=formdate(new Date(1474537128000).toString(),"yyyy年 MM月 dd日 hh:mm:ss");
   console.log(result);//2016年 09月 22日 17:38:48
   
  //根据指定的毫秒值获取年月日，时分秒
  var s=new Date(parseInt(1474537128000)).toLocaleString('chinese',{hour12:false}).replace(/年|月/g, "-").replace(/日/g, " ");
   
   //根据指定的毫秒值获取年月日，时分秒
  var d=new Date(new Date().getTime()).toLocaleString('chinese',{hour12:false}).replace(/\//g,"-");//2016-9-28 10:26:34
  
  console.log(s);//2016/9/22 17:38:48
  
  var x="2016/9/22 17:38:48";
  
  //替换全部的/
  var hx=x.replace(/\//g,"-");
  console.log(hx);
}

function getTimes(){
 
 /*第一种：获取的时间戳是把毫秒改成000显示*/
var timestamp1 = Date.parse(new Date());


/*第二种：第二种和第三种是获取了当前毫秒的时间戳。*/
var timestamp2 = (new Date()).valueOf();

/*第三种*/
var timestamp3=new Date().getTime();

   console.log(   timestamp1);
   console.log(   timestamp2);
   console.log(   timestamp3);

}

function testrr(){
   var date=new Date();
   var n=date.getFullYear();
   var month=date.getMonth()+1+"";
   var day= date.getDate() +"";
   var week=date.getDay();
   var hour=date.getHours();
   var minutes=date.getMinutes();
   var seconds=date.getSeconds();
   
   var ps=Date.parse(new Date());
   var hm=date.getTime();
   
/*   console.log(   hour);
   console.log(   minutes);
   console.log(   seconds);
    console.log(   ps);
	 console.log(   hm);
	  console.log(   date.valueOf());
	 
   var date1=new Date(2007,0,1);
   var date2=new Date(2007,1,1);
   console.log(date1<date2);
   console.log(date1.valueOf());
   
   console.log(   date.toString());*/
   
   
   var result=formdate(new Date().toString(),"yyyy年 MM月 dd日 hh:mm:ss");
   console.log(new Date().toString());
   console.log(result);
   console.log(  new Date(new Date().getTime()).toLocaleString('chinese',{hour12:false}).replace(/\//g,"-"));
}


function tesdd(){
  var str=new Date().toString();
  var tstr="Fri Dec 30 2016 14:28:59 GMT+0800";
  var fr=tstr.indexOf(" ",0)+1;
  var lt=tstr.indexOf(" ",fr);
  var zRlt=tstr.substring(fr,lt);
  
  console.log(zRlt);
   
  
  
}

function tesweek(){

var date=new Date();

var week=date.getDay();

console.log(week);

var weekAry=["周日","周一","周二","周三","周四","周五","周六"];
var todayWeek=weekAry[week];
 
console.log(todayWeek);

}

function sunornight(){
	var date=new Date();

	var hour=date.getHours();
	
	console.log(hour);
	
	if(hour>=6&&hour<=18){
	   console.log("hello sun");
	}else{
		console.log("hello night");
	}
}


/*
  判断两个日期的大小
*/
function checkDate(){
	 
	//方法一（推荐方法一，其它方法在月份或者日期为单个数字时，前面的0有可能会被处理掉，如2017-11-06会处理为2017-11-6，最终数字会如此：2017116）：将指定日期转换为毫秒值然后比较(这种比较适合年月日时分秒的日期  按理说getTime()获取的时间戳不是0000结尾的，传参数后就跟Date.parse()的结果有点类似，但又不全相等。。。。。。)
	 var oldTime = (new Date("2017/2/13")).getTime(); //得到毫秒数    "2017/2/13"能直接传给Date()函数吗，只能是yyyy/mm/dd的格式吗？  
	  
	 var assignDate="2017-1-13";
	 var had=assignDate.replace(new RegExp("-","gm"),"/")
	
	 var timestamp=new Date(had).getTime();
	 
	 var flag=oldTime>timestamp;
	 console.log(flag);//true
	 
	
	//方法二：直接用字符串去比较 年月日
	 console.log("2017-12-13"<"2017-13-14");
	 
	 //方法三：年月日去掉多余的字符，比较数字 年月日
	 var date1="2017-12-13".replace(new RegExp("-","gm"),"");
	 var date2="2017-04-13".replace(new RegExp("-","gm"),"");

	 var flag2=parseInt(date1)>parseInt(date2);
	 console.log(flag2);//true

   //番外：利用正则，将字符串中的-、空格和:一次全部替换掉
   let str='2017-10-16 13:55:17';
   let rlt=str.replace(new RegExp(/[- :]/,'gm'),'');
   console.log(rlt);//20171016135517
	 
}


//获取一段执行了一段代码的时间间隔
function interval(){
		
	var start=+new Date();
	console.log("hello world")
	var stops=+new Date();
	
	console.log(stops-start);
	
	//为啥Date().now是undefined，居然不支持?????????????????/
	/*var starts=Date().now();
	console.log("hehehehehe"+Date().now);
	var stopss=Date().now();
	
	console.log(stopss-starts);*/

}

function getTomorrowDate(){
  var currDate=new Date();
  
  var tDate=new Date((currDate/1000+86400)*1000);

   var month= tDate.getMonth()+1 +"";
     if(month.length<2){
     month="0"+month;
    }
     var day= tDate.getDate() +"";
     if(day.length<2){
     day="0"+day;
    }

  console.log(tDate.getFullYear()+"-"+month+"-"+day)
}

/*获取当前月份向前推N个月*/
function dateNow(){
  // console.log(Date.now());
  // console.log(new Date().getTime());

    var date=new Date(),
        month=date.getMonth(),
        n=1,
        rt=0;

    if (month==0) {
      month=1;
    }else{
      month=month+1;
    }

    month=12;

    if (month==n) {
      rt=12;
    }else if (month>n) {
      rt=month-n;
    }else{
      var j=month-n;
      rt=12+j;
    }

    console.log("向前推"+n+"个月后的月份是："+rt);

}




/*获取当前月份向后推N个月*/
function dateNow2(){
  // console.log(Date.now());
  // console.log(new Date().getTime());

    var date=new Date(),
        month=date.getMonth(),
        n=1,
        rt=0;

    if (month==0) {
      month=1;
    }else{
      month=month+1;
    }

    if (n<12) {

      if (month==12) {
        rt=0+n;
      }else if (month+n>12) {
        rt=(month+n)-12;
      }else{
        rt=month+n;
      }

    }else{

      if (n-12<12) {
        rt=n-12+month;
        
      }else{

        if (n%12==0) {
          rt=month;
          
        }else{
          rt=n%12+month;
        }
        
      }

    }

    console.log("向后推"+n+"个月后的月份是："+rt);

}



function get3MonthBefor(){
    var resultDate,year,month,date,hms;
    var currDate = new Date();
    year = currDate.getFullYear();
    month = currDate.getMonth()+1;
    date = currDate.getDate();
    hms = currDate.getHours() + ':' + currDate.getMinutes() + ':' + (currDate.getSeconds() < 10 ? '0'+currDate.getSeconds() : currDate.getSeconds());
    switch(month)
    {
      case 1:
      case 2:
      case 3:
        month += 9;
        year--;
        break;
      default:
        month -= 3;
        break;
    }
    month = (month < 10) ? ('0' + month) : month;
    resultDate = year + '-'+month+'-'+date+' ' + hms;

    console.log(resultDate)
  // return resultDate;
}


function setMonthTest(){
  var date=new Date();


  console.log(date.getMonth())

  date.setMonth(0)//设置月份


  console.log(date.getMonth())//0
}


function setDayTest(){

  var date=new Date();
  /*date.getDate()根据本地时间，返回一个指定的日期对象为一个月中的第几天*/
  console.log(date.getDate())
  /*setDate() 方法根据本地时间来指定一个日期对象的天数。*/
  date.setDate(1);
  console.log(date )

  /*获取字符串日期的时间戳*/
  var date1=new Date('2017-10-20');
  var time=date1.getTime();
  console.log("时间戳="+time);//1507766400000
  console.log(new Date().getTime())

  setTimeout(function(){
     console.log(new Date().getTime())
  },5000)


}

//？？？？
function isToday(){
var date1=new Date('2017-10-20');
  var time=date1.getTime();
  console.log("时间戳="+time);//1507766400000
  console.log(new Date().getTime())

  setTimeout(function(){
     console.log(new Date().getTime())
  },5000)
}


/*根据指定日期或毫秒值创建日期对象*/
function newDateByAssignDate(){
  

  //方法一：根据指定格式的日期
  var str="2017-10-30 13:39:04";//可以
  var dt=new Date(str);
  console.log(dt.getFullYear()+"-"+dt.getMonth()+"-"+dt.getDate()+" "+dt.getHours()+":"+dt.getMinutes()+":"+dt.getSeconds() )

  //方法二：根据时间的毫秒值
  var dt1=new Date(new Date().getTime());//可以

  console.log(dt1.getFullYear()+"-"+dt1.getMonth()+"-"+dt1.getDate()+" "+dt1.getHours()+":"+dt1.getMinutes()+":"+dt1.getSeconds())

  /*其它格式测试*/
  var str2="2017/10/30 13:39:04";//可以
  var dt2=new Date(str2);
   console.log(dt2.getFullYear()+"-"+dt2.getMonth()+"-"+dt2.getDate()+" "+dt2.getHours()+":"+dt2.getMinutes()+":"+dt2.getSeconds())

  var str3="2017/10/30 13/39/04";//NO 不可以，时间要用冒号隔开奥~~
  var dt3=new Date(str3);
   console.log(dt3.getFullYear()+"-"+dt3.getMonth()+"-"+dt3.getDate()+" "+dt3.getHours()+":"+dt3.getMinutes()+":"+dt3.getSeconds())//NaN-NaN-NaN NaN:NaN:NaN

  var str4="10/30/2017"; //可以
  var dt4=new Date(str4);
   console.log(dt4.getFullYear()+"-"+dt4.getMonth()+"-"+dt4.getDate()+" "+dt4.getHours()+":"+dt4.getMinutes()+":"+dt4.getSeconds())//2017-9-30 0:0:0
}

/*toLocaleStrig()方法的具体用法
  toLocaleString() 方法返回该日期对象的字符串，该字符串格式因不同语言而不同。新增的参数 locales 和 options 使程序能够指定使用哪种语言格式化规则，允许定制该方法的表现（behavior）。在旧版本浏览器中， locales 和 options 参数被忽略，使用的语言环境和返回的字符串格式是各自独立实现的。

  语法：
  dateObj.toLocaleString([locales [, options]])

*/
function localStringTest(){
  var date=new Date("2017-09-07 09:42:06").toLocaleString();
  var date1=new Date("2017-09-07 09:42:06").toLocaleString('chinese',{hour12:false}) // hour12:false  时间24小时制
  console.log(date)//  2017/9/7 上午9:42:06   toLocaleString()方法会把日期前面的0忽略掉，所以不能拿这个方法判断日期大小
  console.log(date1)// 2017/9/7 09:42:06

  // invalid value year for option formatMatcher
  /*var date2=new Date().toLocaleString('chinese',{formatMatcher:'year'})
  console.log(date2)*/

  
}


//判断两个日期的大小
function dxTest(){

 var d1=new Date('Fri Nov 25 2017 03:57:04 GMT+0800');
 var d2=new Date('Fri Nov 17 2017 17:60:04 GMT+0800');

 //方法一：创建Date对象直接比较
 console.log(d2<d1)//true;

//方法二：用创建完的Date对象的getTime()获得的时间戳比较
 console.log(d2.getTime()<d1.getTime())//true;





}
</script>
</head>

<body>
<input type="button"  name="d1" id="d1" value="分别获取日期的时间戳、年、月、日"/></br>
<input type="button"  name="d2" id="d2" value="根据时间的毫秒值处理时间获得年月日"/></br>
<input type="button"  name="d2" id="d3" value="时间格式化"/></br>
<input type="button"    value="时间格式化" onclick="formatDate()"/></br>
<input type="button"    value="获取时间戳" onclick="getTimes()"/></br>
<input type="button"    value="测试日期" onclick="testrr()"/></br>

<input type="button"    value="获取英文月" onclick="tesdd()"/></br>
<input type="button"    value="获取week的中文字符" onclick="tesweek()"/></br>

<input type="button"    value="判断白天和黑夜" onclick="sunornight()"/></br>

<input type="button"    value="判断指定日期大于当前日期" onclick="checkDate()"/></br>

<input type="button"    value="获取一段代码的时间间隔" onclick="interval()"/></br>

<input type="button"    value="获取当前日期对象的加上一天之后的日期对象" onclick="getTomorrowDate()"/></br>

<input type="button"    value="获取当前月份向后推N个月" onclick="dateNow()"/></br>

<input type="button"    value="获取当前月份向前推N个月" onclick="dateNow2()"/></br>


<input type="button"    value="日期向前" onclick="get3MonthBefor()"/></br>


<input type="button"    value="设置月份" onclick="setMonthTest()"/></br>

<input type="button"    value="设置天数" onclick="setDayTest()"/></br>

<input type="button"    value="判断一个日期是否是当天？？？" onclick="isToday()"/></br>


<button type="button" onclick="newDateByAssignDate()">根据指定的日期或毫秒值new Date()对象</button>


<h3>Date类型的toLocalString()方法会按照与浏览器设置的地区相适应的格式返回日期和时间</h3>
<button type="button" onclick="localStringTest()">toLocaleString()方法的具体用法</button>


<button type="button" onclick="dxTest()">日期大小判断</button>
</body>
</html>
