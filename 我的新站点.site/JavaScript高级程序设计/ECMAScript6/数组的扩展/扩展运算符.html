<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>数组的扩展-扩展运算符</title>
<style>

  body{
    /* background: radial-gradient(#bbd5e0, #3ab7ef); */
    height: 960px;
  }
  button,[type='button']{
    background: #abcdef;  
    border: 0;
    display:  block;
    height: 3em;
    line-height: 3em;
    padding: 0 2em;
    margin-bottom: 20px;
    border-radius: .5em;
    color: #fff;
    font-size: 18px;
    box-shadow: 0 0 20px #fff; }     
</style>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head>

<body >
<button type="button" onclick="ellipsis();">扩展运算符</button>
<button type="button" onclick="ellipsisExpression();">扩展运算符后可以放置表达式</button>
<button type="button" onclick="mergeAry();">可以利用扩展运算符合并一个数组</button>
<button type="button" onclick="jgkz();">与结构赋值结合</button>
<button type="button" onclick="spreadSymbol();">任何Iterator接口的对象，都可以用扩展运算符转为真正的数组</button>


<h5>Array.from可以类似数组的对象和可遍历(iterable)对象转为真正的数组</h5>
<button type="button" onclick="aryFrom();">Array.from</button>
<button type="button" onclick="aryOf();">Array创建数组的新方式Array.of</button>

<button type="button" onclick="aryFind();">Array实例的find()和findIndex()方法</button>

<button type="button" onclick="aryFill();">Array实例的fill()方法</button>

<button type="button" onclick="aryBl();">Array实例的entries()、keys()、values()方法</button>

<button type="button" onclick="aryInclude();">Array实例的includes()方法</button>

<button type="button" onclick="aryIn();">in运算符判断数组</button>

 <script type="text/javascript">
    

/* 扩展运算符会将一个数组转为用逗号分隔的参数序列 */
function ellipsis(){
  let ary=['a','b','c'];
  let ary1=[1,2,3,4];
   
  /* 同  console.log('a','b','c')  */
  console.log( ...ary);//a b c  

  /* 同 push(ary1,1,2,3,4)  */
  push(ary1,...ary1);

  console.log(ary1); // Array [ 1, 2, 3, 4, 1, 2, 3, 4 ]

  console.log(...ary,...ary);//a b c a b c



}


function push(ary,...items){
  ary.push(...items);//数组的push()方法可以一次传多个值，用逗号隔开，例如：push('helln','jack')
}


function ellipsisExpression(){
  let x=1;
  const ary=[...(x>0?[1]:[]),6];

  console.log(ary);//Array [ 1, 6 ]
}


/* 合并一个数组 */
function mergeAry(){
  let ary1=[10,20,30];
  let ary2=[1,2,3];

  /*方法一：用es6扩展运算符*/
  let ary3=[...ary1,...ary2];
  console.log(ary3)//Array [ 10, 20, 30, 1, 2, 3 ]

  /*方法二：用es5的concat()方法,concat()不会影响原始数组哎~*/
  let ary33=ary1.concat(ary2,ary2);
  console.log(ary33)//Array [ 10, 20, 30, 1, 2, 3, 1, 2, 3 ]

    
}


function jgkz(){
  const [first,...rest]=[1,2,3,4,5];
  console.log(first);//1
  console.log(rest)//[2, 3, 4, 5]

  const [first1,...rest1]=[1];
  console.log(first1);//1
  console.log(rest1 )//[]

  const [first2,...rest2]=[];
  console.log(first2);//undefined
  console.log(rest2 )//[]

  //如果扩展运算符用于数组赋值，则只能将其放在参数的最后一位，否则会报错
  //For example：const [...rest4,first4]=[1,2,3,4,5];

   
}

function spreadSymbol(){
  let ary=[1,2,3,4];
  let obj={
    0:'helln',
    1:'apple',
    length:2
  };

  let arySp=[...ary];
  console.log(arySp);

  try{
    
    let objSp=[...obj];
   
    console.log(objSp)
  }catch(err){
    console.log(err)
  }
  
}

//Array.from()方法
function aryFrom(){
  let aryLobj={
    0:'helln',
    1:'apple',
    length:2
  };

  let rlt=Array.from(aryLobj);
  console.log(rlt);//['helln','apple']
  console.log(Array.isArray(rlt));//true

  //es5写法  有报错
  /*let rlt1=[].slice().call(aryLobj);
  console.log(rlt1);//['helln','apple']
  console.log(Array.isArray(rlt1));//true*/

  //将arguments转为数组
  foo(1,2,3);//[1,2,3]


  //Array.from()可以传入第二个参数，处理函数
  let rltPm=Array.from([1,2,,3,4,,5],(pm)=>{
    return typeof pm;
  });
  console.log(rltPm);

  //Array.from()可以将各种值转为数组，进而继续使用各种数据方法
  let rltAf=Array.from({length:2},()=>{
    return 'darcy';
  });
  console.log(rltAf);//['darcy','darcy']


  //将字符串转为数据
  let strAry1=[...'hello'];
  let strAry2=Array.from('hello');

  console.log(strAry1);//["h", "e", "l", "l", "o"]
  console.log(strAry2);//["h", "e", "l", "l", "o"]
  



}

//Array.from()和扩展运算符...都可以将某些数据结构(对于扩展运算符来说是必须实现了Iterator接口，而
//Array.from()可以转换类数组对象和实现了Iterator接口的数据结构)转为真正的数组
function foo(param){
  var agrs1=Array.from(arguments);
  var agrs2=[...arguments];
  console.log(agrs1);
  console.log(agrs2);
}

//Array.of()总是返回参数值组成的数组。如果没有参数，就返回一个空数组。
function aryOf(){
  let ary1=new Array(2);
  let ary2=Array.of(2);
  console.log(ary1);//[]
  console.log(ary2);//[2]
}

//数组实例的fill()方法用于找出第一个符合条件的数组成员，参数是一个回调函数，没有找到会返回undefined
//。。。。。fillIndex()方法用于找出第一个符合条件的数组成员的索引值，参数是一个回调函数，没有找到会返回-1
function aryFind(){
  let ary=[1,4,-2,10,NaN];

  var rlt=ary.find((item)=>{
    return item<0;
  });

  var rltIndex=ary.findIndex((item)=>{
    return item<0;
  });

  console.log(rlt)//-2
  console.log(rltIndex)//2

  //findIndex()方法可以找到NaN
  var nan1=ary.indexOf(NaN);
  console.log(nan1);//-1

  var nan2=ary.findIndex((item)=>{
    return Object.is(NaN,item);
  });
  console.log(nan2);//4



}

//实例的fill()方法用于数组的填充
function aryFill(){
  let ary=[1,2,3];
  ary.fill('love');
  console.log(ary);//["love", "love", "love"]

  //fill方法的第二个和第三个参数代表填充的起始位置和结束位置
  let ary1=['a','b','c'];
  ary1.fill('love',1,2);
  console.log(ary1);//["a", "love", "c"]
}

//es6提供了三个新的方法--keys(),values(),entries()用于遍历数组
function aryBl(){
  let ary=['banana','apple','shirmp','garlic'];

  for(let x of ary.keys()){
     console.log(x);//0 1 2 3
  }

 /*报错嘞，难道不支持values()方法吗？？
 Uncaught TypeError: ary.values(...)[Symbol.iterator] is not a function
  for(let y of ary.values()){
     console.log(y); 
  }*/

 /*
    0 "banana"
    1 "apple"
    2 "shirmp"
    3 "garlic"

   */
  for(let [index,elem] of ary.entries()){
     console.log(index,elem); 
  }

 
}

 //Array.prototype.includes方法返回一个布尔值，表示某个数组是否包含给定的值，与字符串的includes方法类似。
 //可判断出数组中是否包含NaN
  function aryInclude(){
    let ary=[1,2,3,NaN];
    var rlt1=ary.includes(2);
    var nan=ary.includes(NaN);//es6的includes()方法可以判断出数组包含NaN
    var nan1=ary.indexOf(NaN);//es5中的indexOf()方法判断不出是否包含NaN
    
    console.log(rlt1);//true
    console.log(nan,nan1);//true,-1

    console.log(ary.includes(NaN,-1));//true  同ary.includes(NaN,4+(-1))


    console.log(new Array(3))
  }

  //in用在数组上，用来判断某个索引位置是否有值
  function aryIn(){
    let ary=['a','b','c'];
    
    var rlt1=0 in ary;
    var rlt2=2 in ary;
    var rlt3=4 in ary;
    console.log(rlt1,rlt2,rlt3);//true true false

  }

 </script>


 
</body>
</html>
