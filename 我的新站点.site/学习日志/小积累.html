<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>日积月累-小积累</title>
<style>
    button{
      display:  block;
      width: 40%;
      min-height: 30px;
      border: none;
      margin: 20px;
      border-radius: 10px;
  
  
    }
  </style>
 
</head>

<body>
  <button class="btn"  onclick="test11()">
    data 格式化---给每一行的值加key
 </button>
 
   
  <script type="text/javascript">

    let foo=function (){
       
    };

    (function test11(){
      foo='hello sir';
      console.log('foo',foo)
    })()

     
    
  </script>

  <h5 onclick="test22()">对象中的方法中执行方法，this指向问题</h5>
  <script type="text/javascript">
      function test22(){
        let obj={
          aa:100,
          fn1:function(){
            console.log('fn1===',this)
            function fninner(){
              console.log('fn1 fninner=',this)
            }

            fninner()
          },

          fn2:()=>{
            console.log('fn2===',this)
            function fninner(){
              console.log('fn2 fninner=',this)
            }

            fninner()
          }
        }

        obj.fn1()

        obj.fn2()

      }
  </script>

  <h5 onclick="bubble()">冒泡</h5>

  <script type="text/javascript">
    function bubble(){
      let ary=[3,2,6,1,7,8,9,10];
      let x=0
      let lastIndex=0;
      let sortedBoder=ary.length-1;

      for(let i=0;i<ary.length;i++){


        let flag=true;

        for(let j=0;j<sortedBoder;j++){
        console.log(' 循环===='+x++,ary[j]);

          if(ary[j]>ary[j+1]){
            let temp=ary[j];
            ary[j]=ary[j+1];
            ary[j+1]=temp;
            flag=false;
            lastIndex=j

          }
        }

        sortedBoder=lastIndex  
        if(flag){
          break;
        }
      }

      console.log('ary=========',ary)
    }
  </script>

  <h5 onclick="aryQC()">数组乱序</h5>
  <script type="text/javascript">
    
    function aryQC(){
      let arr=[1,2,3,4,5];

      for (let i=arr.length-1; i>=0; i--) {
          let rIndex = Math.floor(Math.random()*(i+1));
          console.log(rIndex)
          // 打印交换值
          let temp = arr[rIndex];
          arr[rIndex] = arr[i];
          arr[i] = temp;
        }

      // console.log(arr)
    }
  </script> 

  <h5 onclick="qianfen()">数字千分位格式化，德文的千分位分隔符是 .   小数分隔符是 , </h5>
  <script type="text/javascript">
     
  /**
   * 
   * @param {*} param0 
   * 
   * 
    nStr=0,         //格式化数值
    decimals=2,     //小数后几位
    decimal='.',    //小数分隔符
    separator=',',  //千分位分隔符
    useGrouping=true//是否分组
    lang            //语言类型，用于区分德语环境下千分位为'.'   小数点分隔符为','
    */
    function formatNumber({
      nStr=0,
      decimals=2,
      decimal='.',
      separator=',',
      useGrouping=true,
      lang=''
    }={}) {
        let noChangeNstr=nStr;
        if(typeof nStr!=='number'){
          nStr=parseFloat(nStr);
          if(isNaN(nStr)){
            return noChangeNstr;
          }
        }
       
        if(lang==='de-DE'){
          decimal=',';
          separator='.'
        }
        nStr = nStr.toFixed(decimals);
        nStr += '';
        var x, x1, x2, rgx;
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? decimal + x[1] : '';
        rgx = /(\d+)(\d{3})/;
        if (useGrouping) {
            while (rgx.test(x1)) {
                x1 = x1.replace(rgx, '$1' + separator + '$2');
            }
        }
        return   x1 + x2  ;
    };
    
    function qianfen(){
      
      let num=2100000006.6666;
      // let num=2100000006;

      // console.log(numFormat(num))

      // console.log(formatNumber(num,3,',','.',true))
      let rlt=formatNumber({ nStr:num, useGrouping:true,lang:'de-DE'})

      console.log(typeof rlt,rlt)

       
    }
  </script> 
  <h5



 
</body>
</html>
