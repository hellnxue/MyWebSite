<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>无标题文档</title>
<script>

//验证数字（只能是数字）
  function test(which){
      
	 // alert(/^\d+$/.test(which.value));
	 // if(/^\d+$/.test(which.value)==false){
	 //     // alert("只能填数字！");
	 //     which.value=which.value.replace(/^\d+$/g,'');
	 // }

	  

	  if (which.value.length<=17) {

	  	which.value=which.value.replace(/[^0-9]/g,'');  
	  	console.log('1')
	  }else  if(which.value.length==18 ) {

	  	var a=which.value.substring(17).replace(/[^0-9xX]/g,'');  
	  	// which.value=which.value+a;


	  	// which.value=which.value.substring(0,17)+which.value

	  	console.log(a);

	  	// console.log(which.value.substring(0,17)+a);

	  	if (a=='x') {
	  		a=a.toUpperCase();
	  	}

	  	which.value=which.value.substring(0,17)+a;


	     // console.log(which.value.substring(17))
	  }


  }
</script>
</head>

<body>
<label>18位身份证，最后一位允许输入x，其它全部必须是数字，包括15位的（15位的身份证也必须是数字）</label>
<input type="text" name="integer" value="" id="dd"  onkeyup="test(this)" maxlength="18" />

<div>&nbsp;</div>
</body>
</html>
